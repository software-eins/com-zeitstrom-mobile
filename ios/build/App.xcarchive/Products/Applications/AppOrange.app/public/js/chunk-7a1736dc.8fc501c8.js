(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7a1736dc"],{"02cf":function(e,t,r){"use strict";r("e05b")},"159b":function(e,t,r){var o=r("da84"),n=r("fdbc"),c=r("17c2"),i=r("9112");for(var s in n){var a=o[s],u=a&&a.prototype;if(u&&u.forEach!==c)try{i(u,"forEach",c)}catch(l){u.forEach=c}}},"17c2":function(e,t,r){"use strict";var o=r("b727").forEach,n=r("a640"),c=r("ae40"),i=n("forEach"),s=c("forEach");e.exports=i&&s?[].forEach:function(e){return o(this,e,arguments.length>1?arguments[1]:void 0)}},4160:function(e,t,r){"use strict";var o=r("23e7"),n=r("17c2");o({target:"Array",proto:!0,forced:[].forEach!=n},{forEach:n})},"4de4":function(e,t,r){"use strict";var o=r("23e7"),n=r("b727").filter,c=r("1dde"),i=r("ae40"),s=c("filter"),a=i("filter");o({target:"Array",proto:!0,forced:!s||!a},{filter:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},5338:function(e,t,r){},5530:function(e,t,r){"use strict";r.d(t,"a",(function(){return c}));r("a4d3"),r("4de4"),r("4160"),r("e439"),r("dbb4"),r("b64b"),r("159b");function o(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,o)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}},"6bfe":function(e,t,r){"use strict";r("b0c0");var o=r("7a23"),n=Object(o["K"])("data-v-3ce78048");Object(o["z"])("data-v-3ce78048");var c={key:1,class:"w-full flex items-center"},i={key:2,slot:"end",class:"text-right flex-grow"},s={key:4,class:"w-full flex items-center"},a={class:"flex flex-wrap pb-1"};Object(o["x"])();var u=n((function(e,t,r,u,l,d){var f=Object(o["E"])("ion-label"),b=Object(o["E"])("ion-input"),O=Object(o["E"])("zeit-promise-solver"),j=Object(o["E"])("ion-spinner"),h=Object(o["E"])("ion-select-option"),m=Object(o["E"])("ion-select"),p=Object(o["E"])("ion-toggle"),v=Object(o["E"])("ion-item");return Object(o["w"])(),Object(o["e"])("div",null,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["C"])(e.getFields(),(function(t,r){return Object(o["w"])(),Object(o["e"])(v,{key:r,lines:r+1==e.getFields().length?e.lastLine:void 0},{default:n((function(){return[e.errors&&e.errors[t.name]?(Object(o["w"])(),Object(o["e"])(f,{key:0,position:"stacked",class:"w-full",color:"danger"},{default:n((function(){return[Object(o["i"])(Object(o["G"])(e.errors[t.name][0]),1)]})),_:2},1024)):Object(o["f"])("",!0),"text"==t.mobileType?(Object(o["w"])(),Object(o["e"])("div",c,[Object(o["j"])(f,null,{default:n((function(){return[Object(o["i"])(Object(o["G"])(t.label),1)]})),_:2},1024),t.isReadOnly||e.disabled?Object(o["f"])("",!0):(Object(o["w"])(),Object(o["e"])(b,{key:0,slot:"end",class:"text-right",modelValue:e.localResource[t.name],"onUpdate:modelValue":function(r){return e.localResource[t.name]=r}},null,8,["modelValue","onUpdate:modelValue"])),!t.isReadOnly&&!e.disabled||t.renderer?(Object(o["w"])(),Object(o["e"])("div",i,[Object(o["j"])(O,{promise:t.renderer(e.localResource),key:e.localResource[t.name]},null,8,["promise"])])):(Object(o["w"])(),Object(o["e"])(b,{key:1,disabled:"",slot:"end",class:"text-right",value:e.localResource[t.name]||t.default},null,8,["value"]))])):"stacked"==t.mobileType?(Object(o["w"])(),Object(o["e"])(o["a"],{key:2},[Object(o["j"])(f,{position:"stacked"},{default:n((function(){return[Object(o["i"])(Object(o["G"])(t.label),1)]})),_:2},1024),Object(o["j"])(b,{disabled:t.isReadOnly||e.disabled,modelValue:e.localResource[t.name],"onUpdate:modelValue":function(r){return e.localResource[t.name]=r}},null,8,["disabled","modelValue","onUpdate:modelValue"])],64)):"select"==t.mobileType?(Object(o["w"])(),Object(o["e"])(o["a"],{key:3},[Object(o["j"])(f,{position:"stacked"},{default:n((function(){return[Object(o["i"])(Object(o["G"])(t.label),1)]})),_:2},1024),e.choicesByField[t.name]?Object(o["f"])("",!0):(Object(o["w"])(),Object(o["e"])(j,{key:0})),e.choicesByField[t.name]?(Object(o["w"])(),Object(o["e"])(m,{key:1,disabled:t.isReadOnly||e.disabled,"interface-options":{header:t.label},interface:"action-sheet",placeholder:"Foo","cancel-text":"Abbrechen",modelValue:e.localResource[t.name],"onUpdate:modelValue":function(r){return e.localResource[t.name]=r}},{default:n((function(){return[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["C"])(e.choicesByField[t.name],(function(e){return Object(o["w"])(),Object(o["e"])(h,{key:e.id,value:e.id},{default:n((function(){return[Object(o["i"])(Object(o["G"])(e.$display),1)]})),_:2},1032,["value"])})),128))]})),_:2},1032,["disabled","interface-options","modelValue","onUpdate:modelValue"])):Object(o["f"])("",!0)],64)):"bool"==t.mobileType?(Object(o["w"])(),Object(o["e"])("div",s,[Object(o["j"])(f,{class:"flex-grow"},{default:n((function(){return[Object(o["i"])(Object(o["G"])(t.label),1)]})),_:2},1024),Object(o["j"])(p,{class:"flex-none",disabled:t.isReadOnly||e.disabled,modelValue:e.localResource[t.name],"onUpdate:modelValue":function(r){return e.localResource[t.name]=r}},null,8,["disabled","modelValue","onUpdate:modelValue"])])):"color"==t.mobileType?(Object(o["w"])(),Object(o["e"])(o["a"],{key:5},[Object(o["j"])(f,{position:"stacked"},{default:n((function(){return[Object(o["i"])(Object(o["G"])(t.label),1)]})),_:2},1024),Object(o["j"])("div",a,[(Object(o["w"])(!0),Object(o["e"])(o["a"],null,Object(o["C"])(e.colors,(function(r){return Object(o["w"])(),Object(o["e"])("div",{key:r.code,class:["color-box rounded my-2 mr-4",{active:e.localResource[t.name]==r.code}],style:e.getColorStyle(r),onClick:function(o){return e.updateLocalResource(t,r.code)}},null,14,["onClick"])})),128))])],64)):(Object(o["w"])(),Object(o["e"])(o["a"],{key:6},[Object(o["i"])(Object(o["G"])(t.mobileType),1)],64))]})),_:2},1032,["lines"])})),128))])})),l=(r("99af"),r("4de4"),r("c975"),r("d81d"),r("5530")),d=r("2909"),f=r("b85c"),b=r("8a30"),O=r("ee82"),j=r("9ba5"),h=Object(o["k"])({components:{IonItem:b["o"],IonInput:b["n"],IonLabel:b["p"],IonSelect:b["E"],IonToggle:b["P"],IonSelectOption:b["F"],IonSpinner:b["H"],ZeitPromiseSolver:j["a"]},props:{resource:Object,service:Object,formFields:Object,errors:Object,disabled:{type:Boolean,default:!1},lastLine:String},data:function(){return{colors:O["a"],localResource:{},mode:"create",choicesByField:{}}},methods:{getFields:function(){var e=this;return(this.formFields||this.service.formFields).filter((function(t){var r="edit"==e.mode&&t.showEdit||"create"==e.mode&&t.showCreate;return!!r&&!!t.showField(e.resource)}))},getColorStyle:function(e){return{background:"#"+e.code}},updateLocalResource:function(e,t){this.disabled||e.isReadOnly||(this.localResource[e.name]=t)},copyRemoteResource:function(){this.resource.id&&(this.localResource=JSON.parse(JSON.stringify(this.resource)),this.mode="edit")}},watch:{localResource:{deep:!0,handler:function(e){this.$emit("update:resource",e)}}},mounted:function(){var e=this;this.copyRemoteResource();var t,r=Object(f["a"])(this.getFields());try{var o=function(){var r=t.value;if("select"!=r.type)return"continue";var o=r.remoteSourceService[r.remoteSourceListMethod];o.call(r.remoteSourceService).then((function(t){var o=[];r.allowNull&&o.push({id:void 0,$display:"Keine Auswahl"});var n=[],c=e.localResource[r.name]&&-1==t.data.results.map((function(e){return e.id})).indexOf(e.localResource[r.name]);c&&("id"==r.remoteSourceAttribute?n.push({id:e.localResource[r.name]}):console.warn("Field not loaded")),n=[].concat(Object(d["a"])(n),Object(d["a"])(t.data.results)),n=n.map((function(e){return Object(l["a"])({$display:e[r.remoteSourceAttribute]},e)})),e.choicesByField[r.name]=[].concat(o,Object(d["a"])(n))}))};for(r.s();!(t=r.n()).done;)o()}catch(n){r.e(n)}finally{r.f()}}});r("774c");h.render=u,h.__scopeId="data-v-3ce78048";t["a"]=h},"774c":function(e,t,r){"use strict";r("5338")},"7e68":function(e,t,r){"use strict";r.d(t,"a",(function(){return O}));var o=r("7a23"),n=Object(o["i"])("Speichern"),c=Object(o["i"])("Hinzufügen");function i(e,t,r,i,s,a){var u=Object(o["E"])("ion-back-button"),l=Object(o["E"])("ion-buttons"),d=(Object(o["E"])("ion-title"),Object(o["E"])("ion-icon")),f=Object(o["E"])("ion-button"),b=Object(o["E"])("ion-toolbar"),O=Object(o["E"])("ion-header"),j=Object(o["E"])("zeit-form"),h=Object(o["E"])("ion-content"),m=Object(o["E"])("ion-page");return e.isInitialised?(Object(o["w"])(),Object(o["e"])(m,{key:0},{default:Object(o["J"])((function(){return[Object(o["j"])(O,{translucent:!0},{default:Object(o["J"])((function(){return[Object(o["j"])(b,null,{default:Object(o["J"])((function(){return[Object(o["j"])(l,{slot:"start"},{default:Object(o["J"])((function(){return[Object(o["j"])(u,{"default-href":"/",text:"Zurück"})]})),_:1}),Object(o["f"])("",!0),Object(o["j"])(l,{slot:"primary"},{default:Object(o["J"])((function(){return[e.getActions().length>0?(Object(o["w"])(),Object(o["e"])(f,{key:0,color:"primary",onClick:e.showMoreMenu},{default:Object(o["J"])((function(){return[Object(o["j"])(d,{slot:"icon-only",ios:e.ellipsisHorizontalCircle,md:e.ellipsisHorizontal},null,8,["ios","md"])]})),_:1},8,["onClick"])):Object(o["f"])("",!0),e.remoteResource.id&&e.hasEditPermissions()?(Object(o["w"])(),Object(o["e"])(f,{key:1,color:"primary",strong:!0,disabled:!e.hasChanges(),onClick:t[1]||(t[1]=function(t){return e.updateRemoteResource()})},{default:Object(o["J"])((function(){return[n]})),_:1},8,["disabled"])):Object(o["f"])("",!0),!e.remoteResource.id&&e.hasCreatePermissions()?(Object(o["w"])(),Object(o["e"])(f,{key:2,color:"primary",strong:!0,disabled:!e.hasChanges(),onClick:t[2]||(t[2]=function(t){return e.createRemoteResource()})},{default:Object(o["J"])((function(){return[c]})),_:1},8,["disabled"])):Object(o["f"])("",!0)]})),_:1})]})),_:1})]})),_:1}),Object(o["j"])(h,{fullscreen:!0},{default:Object(o["J"])((function(){return[Object(o["D"])(e.$slots,"before-form"),Object(o["j"])(j,{ref:"form",resource:e.localResource,service:e.service,formFields:e.formFields,"onUpdate:resource":t[3]||(t[3]=function(t){return e.updateLocalResource(t)}),errors:e.formErrors,disabled:!e.hasEditPermissions()},null,8,["resource","service","formFields","errors","disabled"]),Object(o["D"])(e.$slots,"after-form")]})),_:3})]})),_:1})):Object(o["f"])("",!0)}r("99af"),r("c975"),r("d3b7"),r("3ca3"),r("ddb0"),r("96cf");var s=r("1da1"),a=r("b85c"),u=r("d4ec"),l=r("8a30"),d=r("ff79"),f=r("6bfe"),b=r("ba82"),O=function e(t,r,o){Object(u["a"])(this,e),this.text=t,this.handler=r,this.role=o},j=Object(o["k"])({components:{IonPage:l["x"],IonHeader:l["j"],IonToolbar:l["Q"],IonIcon:l["k"],IonButton:l["c"],IonButtons:l["d"],IonBackButton:l["b"],IonTitle:l["O"],IonContent:l["g"],ZeitForm:f["a"]},props:{service:Object,extraQueryParams:Object,formFields:Object,extraActions:{type:Array,default:function(){return new Array}},isEditable:{type:Boolean,default:!0},editPermission:{type:String,default:"edit"}},data:function(){return{isInitialised:!1,ellipsisHorizontalCircle:d["t"],ellipsisHorizontal:d["s"],remoteResource:void 0,localResource:void 0,formErrors:void 0,accountService:b["a"],account:void 0,titleAttribute:function(e){return e.id},newResourceTitle:"",newResourceConfirmation:"",deleteResourceMethod:"",deleteResourceTitle:"",deleteResourceConfirmation:""}},methods:{getTitle:function(){return this.$route.params.id?this.titleAttribute(this.remoteResource):this.newResourceTitle},reloadRemoteResource:function(){var e=this;return this.service.retrieve(this.$route.params.id,this.extraQueryParams).then((function(t){e.remoteResource=t.data,e.localResource=JSON.parse(JSON.stringify(t.data))}))},hasChanges:function(){return JSON.stringify(this.remoteResource)!=JSON.stringify(this.localResource)},updateLocalResource:function(e){this.localResource=e},updateRemoteResource:function(){var e=this;this.formErrors=void 0,this.service.update(this.localResource.id,this.localResource).then((function(){e.$router.go(-1);l["V"].create({message:"Deine Änderungen wurden gespeichert.",duration:2e3}).then((function(e){return e.present()}))})).catch((function(t){400==t.response.status&&(e.formErrors=t.response.data)}))},createRemoteResource:function(){var e=this;this.formErrors=void 0,this.service.create(this.localResource).then((function(){e.$router.go(-1),l["V"].create({message:e.newResourceConfirmation,duration:2e3}).then((function(e){return e.present()}))})).catch((function(t){400==t.response.status&&(e.formErrors=t.response.data)}))},hasPermission:function(e){if(!this.account)return!1;var t=this.$route.meta.permissionSpace+":"+e;return this.account.permissions.indexOf(t)>-1},hasCreatePermissions:function(){return this.hasPermission("add")},hasEditPermissions:function(){return this.hasPermission(this.editPermission)&&this.isEditable},hasDeletePermissions:function(){return this.hasPermission("delete")},getActions:function(){var e,t=this,r=[],o=Object(a["a"])(this.extraActions);try{var n=function(){var o=e.value;r.push({text:o.text,role:o.role,handler:function(){return o.handler(t.remoteResource)}})};for(o.s();!(e=o.n()).done;)n()}catch(c){o.e(c)}finally{o.f()}return this.localResource.id&&this.hasDeletePermissions()&&this.deleteResourceMethod&&r.push({text:this.deleteResourceTitle,role:"destructive",handler:function(){t.service[t.deleteResourceMethod](t.localResource.id).then((function(){t.$router.go(-1);l["V"].create({message:t.deleteResourceConfirmation,duration:2e3}).then((function(e){return e.present()}))}))}}),r},showMoreMenu:function(){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l["S"].create({buttons:e.getActions().concat([{text:"Zurück",role:"cancel"}])});case 2:return r=t.sent,t.abrupt("return",r.present());case 4:case"end":return t.stop()}}),t)})))()}},beforeMount:function(){var e=this,t=this.$route.params.id,r=[];r.push(this.accountService.list().then((function(t){e.account=t.data.results[0]}))),t?r.push(this.reloadRemoteResource()):(this.localResource={},this.remoteResource={}),r=r.concat([this.service.titleAttribute(t).then((function(t){e.titleAttribute=t})),this.service.newResourceTitle(t).then((function(t){e.newResourceTitle=t})),this.service.newResourceConfirmation(t).then((function(t){e.newResourceConfirmation=t})),this.service.deleteResourceMethod(t).then((function(t){e.deleteResourceMethod=t})),this.service.deleteResourceTitle(t).then((function(t){e.deleteResourceTitle=t})),this.service.deleteResourceConfirmation(t).then((function(t){e.deleteResourceConfirmation=t}))]),Promise.all(r).then((function(){e.isInitialised=!0}))}});j.render=i;t["b"]=j},"9ba5":function(e,t,r){"use strict";var o=r("7a23"),n=Object(o["K"])("data-v-edc77cd2"),c=n((function(e,t,r,n,c,i){var s=Object(o["E"])("ion-skeleton-text");return Object(o["w"])(),Object(o["e"])("span",null,[e.isSolved?Object(o["f"])("",!0):(Object(o["w"])(),Object(o["e"])(s,{key:0,style:e.getPlaceholderStyle(),animated:""},null,8,["style"])),Object(o["i"])(" "+Object(o["G"])(e.value),1)])})),i=r("8a30"),s=Object(o["k"])({components:{IonSkeletonText:i["G"]},props:{promise:Object,width:{type:String,default:"40px"}},data:function(){return{isSolved:!1,value:void 0}},methods:{getPlaceholderStyle:function(){return{width:this.width,display:"inline-block"}}},mounted:function(){var e=this;this.promise.then((function(t){e.value=t,e.isSolved=!0}))}});r("02cf");s.render=c,s.__scopeId="data-v-edc77cd2";t["a"]=s},b64b:function(e,t,r){var o=r("23e7"),n=r("7b0b"),c=r("df75"),i=r("d039"),s=i((function(){c(1)}));o({target:"Object",stat:!0,forced:s},{keys:function(e){return c(n(e))}})},dbb4:function(e,t,r){var o=r("23e7"),n=r("83ab"),c=r("56ef"),i=r("fc6a"),s=r("06cf"),a=r("8418");o({target:"Object",stat:!0,sham:!n},{getOwnPropertyDescriptors:function(e){var t,r,o=i(e),n=s.f,u=c(o),l={},d=0;while(u.length>d)r=n(o,t=u[d++]),void 0!==r&&a(l,t,r);return l}})},e05b:function(e,t,r){},e439:function(e,t,r){var o=r("23e7"),n=r("d039"),c=r("fc6a"),i=r("06cf").f,s=r("83ab"),a=n((function(){i(1)})),u=!s||a;o({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return i(c(e),t)}})},ee82:function(e,t,r){"use strict";r.d(t,"a",(function(){return o}));var o=[{code:"4e79a7",text:"f9f9f9"},{code:"59a14f",text:"f9f9f9"},{code:"9c755f",text:"f9f9f9"},{code:"f28e2b",text:"f9f9f9"},{code:"edc948",text:"222222"},{code:"bab0ac",text:"222222"},{code:"e15759",text:"f9f9f9"},{code:"b07aa1",text:"f9f9f9"},{code:"76b7b2",text:"f9f9f9"},{code:"ff9da7",text:"222222"},{code:"eeeeee",text:"222222"}]}}]);
//# sourceMappingURL=chunk-7a1736dc.8fc501c8.js.map